You are building a production-ready web application called **FanGate**.

### ğŸš€ PROJECT GOAL
A system that verifies real BTS fans before accessing the concert ticket purchase link.
Verification steps:
1. Login via Spotify OAuth
2. Spotify listening history analysis (top tracks, artists, recently played)
3. BTS quiz
4. If fan passes, generate a secure one-time token & redirect to ticket sale page.

---

### âœ… TECHNOLOGY STACK
- Next.js 14 (App Router)
- TypeScript
- TailwindCSS
- Prisma ORM
- PostgreSQL database (Supabase or Neon) â€“ MUST be fully setup
- NextAuth (Spotify provider)
- JWT + server session tokens
- Axios/Fetch for Spotify requests
- Ready for Vercel deployment

---

### âœ… DATABASE REQUIREMENTS (POSTGRESQL + PRISMA)

Create these tables:

âœ… `User`
- id (string uuid)
- spotifyId (unique)
- email
- displayName
- image
- createdAt

âœ… `Verification`
- id
- userId (relation)
- fanScore
- quizPassed
- verifiedAt
- passToken
- tokenExpiresAt

âœ… `QuizQuestion`
- id
- question (string)
- options (string[])
- correctIndex (integer)

âœ… `QuizAttempt`
- id
- userId
- score
- createdAt

---

### âœ… IMPORTANT: QUIZ HANDLING

#### âœ… Include a `quiz.json` file in `/data/quiz.json`
This JSON file will be used to store quiz questions manually later.

Example format:
```json
[
  {
    "question": "Which BTS member released 'Seven'?",
    "options": ["Jungkook", "V", "Jimin", "RM"],
    "correctIndex": 0
  }
]
âœ… Include a script /scripts/seedQuiz.ts that:
Reads /data/quiz.json

Inserts all entries into QuizQuestion using Prisma

Runs with npm run seed

Does NOT crash if duplicates exist (use upsert or skip)

âœ… FALLBACK QUIZ (MANDATORY)
Even if JSON is not loaded, Bolt must insert 5 default BTS questions into the database on project init.
Questions should be REAL BTS trivia, not generic or AI-looking.

Example fallback questions:

â€œWhat is the name of BTSâ€™s fandom?â€ â†’ ARMY

â€œWhich BTS member is also known as Agust D?â€ â†’ Suga

â€œWhich BTS album contains the song Blood Sweat & Tears?â€ â†’ Wings

â€œWho is the leader of BTS?â€ â†’ RM

â€œWhich memberâ€™s solo album is called â€˜FACEâ€™?â€ â†’ Jimin

These should be automatically inserted only if DB has zero quiz questions.

âœ… LANDING PAGE
Aesthetic BTS-themed (purple, neon, gradient, glass)

Not generic UI

Premium, professional

Sections:
âœ… Hero with CTA: â€œLogin with Spotifyâ€
âœ… Why Fan Verification?
âœ… Steps of process
âœ… Footer

âœ… SPOTIFY AUTH & DATA ANALYSIS
After login:

Fetch top artists

Fetch top tracks

Fetch recently played

Compare with hardcoded BTS artist ID array

Compute fan score:
+50 if BTS in top artists
+20 per solo member in top artists
+10 per BTS track in top songs
+30 if recent BTS listening in last 30 days
+10 if Spotify account > 60 days old

Store verification attempt.

If score >= 70 â†’ allow quiz.

âœ… QUIZ PAGE
10 questions from DB

Timer + anti-bot

Score >= 7 â†’ Passed

Store QuizAttempt

If passed + fan score valid â†’ generate passToken (JWT) expiring in 10 minutes

âœ… AFTER VERIFICATION
Show success screen:

Confetti animation

â€œYou are a verified ARMYâ€

Button â†’ redirect to process.env.TICKET_REDIRECT_URL with token

âœ… ADMIN PANEL /admin
Protected by admin email in env

Show:

users

verification score

quiz results

export CSV button

âœ… DEPLOYMENT REQUIREMENTS
Fully compatible with Vercel serverless

.env.example must include:
DATABASE_URL
SPOTIFY_CLIENT_ID
SPOTIFY_CLIENT_SECRET
NEXTAUTH_SECRET
TICKET_REDIRECT_URL
ADMIN_EMAIL

No TODOs left in code

Must run with: npm run seed to load quiz.json

âœ… FINAL DELIVERABLE FROM BOLT
Bolt must generate:

âœ… Next.js app
âœ… Tailwind styling
âœ… NextAuth + Spotify login
âœ… Prisma schema + migration files
âœ… quiz.json file
âœ… seedQuiz.ts script
âœ… fallback quiz insertion
âœ… Fan score API
âœ… Quiz system
âœ… Token redirect logic
âœ… Admin panel
âœ… Fully deployable on Vercel

NO placeholder UI.
NO partial implementations.
UI must be unique, aesthetic, premium, BTS-themed.